angular.module('app')

.controller('NewDishCtrl', ['$scope', '$location', '$cordovaCamera', '$ionicPlatform', '$rootScope', 'restaurant', 'server',
	function($scope, $location, $cordovaCamera, $ionicPlatform, $rootScope, restaurant, server){
		$scope.dish = {};

		$ionicPlatform.ready(function () {

			$scope.takePicture = function takePicture(userSourchType) {

				var optionSourchType = userSourchType === 'camera' ? Camera.PictureSourceType.CAMERA : Camera.PictureSourceType.PHOTOLIBRARY;

				var options = {
					quality : 75,
					destinationType : Camera.DestinationType.DATA_URL,
					sourceType : optionSourchType,
					allowEdit : true,
					encodingType: Camera.EncodingType.JPEG,
					targetWidth: 300,
					targetHeight: 300,
					popoverOptions: CameraPopoverOptions,
					saveToPhotoAlbum: false
				};

				$cordovaCamera.getPicture(options).then(function(imageData) {

					$scope.dish.base64_string = "data:image/jpeg;base64," + imageData;

				}, function(error) {

					alert(error);

				});

			}

			$scope.save = function save() {

				//base 64 string for web tests
				//'data:image/jpeg;base64,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'
				
				var _restaurant = restaurant.getCurrentRestaurant();

				var dish = {
					image: $scope.dish.base64_string,
					name: $scope.dish.name, 
					restaurant: _restaurant.id
				}

				//$scope.dishes.push($scope.dish);

				server.setDish(dish).then(function(response){

					$location.path('restaurant/'+_restaurant.id);

				}, function(error){

					console.log(response);

				});

			}

		});
}]);